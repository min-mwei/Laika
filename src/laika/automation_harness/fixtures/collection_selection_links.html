<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Laika Fixture: Selection Links</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        margin: 24px;
        color: #142032;
      }
      h1 {
        margin: 0 0 10px;
        font-size: 18px;
      }
      .hint {
        margin: 0 0 16px;
        color: #41536a;
        font-size: 13px;
      }
      #thread {
        border: 1px solid #d6e2f1;
        border-radius: 10px;
        padding: 14px 14px 6px;
        background: #f7f9fc;
        max-width: 820px;
      }
      .item {
        margin: 0 0 12px;
        padding: 10px 12px;
        border-radius: 8px;
        background: white;
        border: 1px solid rgba(0, 0, 0, 0.04);
      }
      .item-title {
        font-weight: 600;
        margin-bottom: 6px;
      }
      .meta {
        color: #41536a;
        font-size: 12px;
        margin-top: 6px;
      }
      a {
        color: #0b57d0;
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <h1>Selection Links Fixture</h1>
    <p class="hint">
      This page auto-selects the thread region on load so automation can call
      <code>browser.get_selection_links</code> without brittle UI selection.
    </p>

    <div id="thread" aria-label="Thread">
      <div class="item">
        <div class="item-title">Outlets covering the same story</div>
        <div>
          <a href="/fixtures/pitch_news_outlet_publicnote.html">Public Note</a>
          •
          <a href="/fixtures/pitch_news_outlet_redwood.html">Redwood</a>
          •
          <a href="/fixtures/pitch_news_outlet_citywire.html">CityWire</a>
          •
          <a href="/fixtures/pitch_news_outlet_marketpulse.html">MarketPulse</a>
        </div>
        <div class="meta">
          Duplicate link (should dedupe):
          <a href="/fixtures/pitch_news_outlet_redwood.html">Redwood (again)</a>
          • Non-http (should ignore): <a href="mailto:test@example.com">email</a>
        </div>
      </div>

      <div class="item">
        <div class="item-title">Related reading</div>
        <div>
          <a href="https://example.com/story-a">Example Story A</a>
          •
          <a href="https://example.com/story-b">Example Story B</a>
        </div>
      </div>
    </div>

    <script>
      (function () {
        "use strict";

        function selectThread() {
          var thread = document.getElementById("thread");
          if (!thread || typeof document.createRange !== "function" || typeof window.getSelection !== "function") {
            return;
          }
          try {
            var range = document.createRange();
            range.selectNodeContents(thread);
            var selection = window.getSelection();
            if (!selection) {
              return;
            }
            selection.removeAllRanges();
            selection.addRange(range);
          } catch (error) {
          }
        }

        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", function () {
            setTimeout(selectThread, 50);
          });
        } else {
          setTimeout(selectThread, 50);
        }
      })();
    </script>
  </body>
</html>

